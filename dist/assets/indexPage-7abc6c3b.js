import{T as oe,r as o,W as P,c as Y,o as y,d as F,f as e,e as l,w as p,j as t,L as q,_ as se,s as le,ab as ne,Q as de,R as re,u as ie,a as ce,m as ue,N as me,g as S,U as pe,a6 as ve,M as J,h as te}from"./index-5257d121.js";import{C as _e}from"./index-ee012d29.js";import{I as K}from"./index-a99f37f1.js";import{I as R,B,M as ee,_ as he,T as X,P as be}from"./loadingPage-d0b9612f.js";import{T as M}from"./index-0ce5dbaa.js";import{F as ae}from"./index-a8f31531.js";import{R as Q}from"./index-2f50d0f9.js";import"./index-ac72f062.js";import"./cleave-phone.mz-1deb776e.js";import"./transition-f4c2e5eb.js";import"./use-outside-click-507e6bef.js";const ge=oe("clients",()=>{const b=o([]);return{createUser:async r=>{try{const a=await P.post("client",r)}catch(a){throw a}},fetchClient:async()=>{try{const r=await P.get("client");b.value=r.data}catch(r){throw console.error("Failed to fetch colleges:",r),r}},createClient:async r=>{try{return{success:!0,data:(await P.post("client/"+r.user_id,r)).data}}catch(a){return console.error("Failed to create user:",a),{success:!1,error:a}}},deleteClient:async r=>{try{const a=await P.delete("client/"+r.id)}catch(a){throw console.error("Failed to remove user:",a),a}},updateClient:async r=>{try{const a=await P.put("client/"+r.id,r)}catch(a){console.error("Failed to create user:",a)}}}}),fe={class:"grid grid-cols-12 gap-4 p-4"},xe={class:"col-span-12 md:col-span-6"},ye={class:"text-base text-slate-600 dark:text-slate-300"},Ce={class:"col-span-12 md:col-span-6"},Ve={class:"text-base text-slate-600 dark:text-slate-300"},ke={class:"col-span-12 md:col-span-6"},Ee={class:"text-base text-slate-600 dark:text-slate-300"},Me={class:"col-span-12 md:col-span-6"},$e={class:"text-base text-slate-600 dark:text-slate-300"},we=e("label",{class:"block mb-2"},"Sexo",-1),Ue={class:"flex gap-5"},Ne={class:"mt-2 text-danger-500 block text-sm"},Te={class:"col-span-12 md:col-span-6"},Se={class:"text-base text-slate-600 dark:text-slate-300"},Fe={class:"mt-2 text-danger-500 block text-sm"},Re={class:"col-span-12 md:col-span-6"},Ie={class:"text-base text-slate-600 dark:text-slate-300"},Pe={class:"col-span-12 md:col-span-6"},Be={class:"text-base text-slate-600 dark:text-slate-300"},je=e("div",{class:"col-span-12 md:col-span-12"},[e("div",{class:"relative flex items-center justify-center my-4"},[e("div",{class:"absolute inset-0 flex items-center"},[e("hr",{class:"flex-1 border-t border-gray-300"})]),e("span",{class:"relative px-4 text-gray-500 bg-white"},"Contacto de emergência")])],-1),De={class:"col-span-12 md:col-span-6"},Ge={class:"text-base text-slate-600 dark:text-slate-300"},Oe={class:"col-span-12 md:col-span-6"},qe={class:"text-base text-slate-600 dark:text-slate-300"},ze={class:"mt-2 text-danger-500 block text-sm"},Ae={class:"flex gap-5 mx-2 px-2"},Le={__name:"createModal",emits:["CreateEmployeeModal"],setup(b,{emit:$}){const C=o(!1),E=()=>{C.value=!C.value},d=()=>{C.value=!1},g={phoneValidate:{phone:!0,phoneRegionCode:"MZ"}},r=o(""),a=o(""),n=o(""),s=o(""),h=o(""),v=o(""),V=o(""),k=o("user"),f=o(""),w=o(""),j=o(""),U=o(""),Z=o(""),D=o(""),I=o(""),z=o("");o("");const N=o(""),G=o(""),O=()=>{let _=!0;return r.value?j.value="":(j.value="Nome é obrigatório",_=!1),a.value?U.value="":(U.value="Endereço é obrigatório",_=!1),s.value?D.value="":(D.value="Sexo é obrigatório",_=!1),h.value?I.value="":(I.value="Data de nascimento é obrigatória",_=!1),v.value?z.value="":(z.value="Telefone 1 é obrigatório",_=!1),f.value?N.value="":(N.value="Nome do contato de emergência é obrigatório",_=!1),w.value?G.value="":(G.value="Contato de emergência é obrigatório",_=!1),_},W=()=>{if(O()){const _={email:n.value,name:r.value,birth:h.value,gender:s.value,phone1:v.value,address:a.value,role:k.value,emergency_contact_name:f.value,emergency_contact:w.value};$("CreateEmployeeModal",_),d()}else console.log("Formulário inválido")};return(_,c)=>{const H=Y("flat-pickr");return y(),F("div",null,[e("button",{onClick:E,class:"btn inline-flex justify-center btn-outline-dark"},"Novo Cliente"),l(t(ee),{title:"Novo Cliente",label:"Novo Cliente",activeModal:C.value,onClose:d,sizeClass:"max-w-5xl"},{default:p(()=>[e("div",fe,[e("div",xe,[e("div",ye,[l(t(M),{label:"Nome completo",type:"text",placeholder:"Nome completo",modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=i=>r.value=i),error:j.value},null,8,["modelValue","error"])])]),e("div",Ce,[e("div",Ve,[l(t(M),{label:"Endereço",type:"text",placeholder:"Endereço",modelValue:a.value,"onUpdate:modelValue":c[1]||(c[1]=i=>a.value=i),error:U.value},null,8,["modelValue","error"])])]),e("div",ke,[e("div",Ee,[l(t(M),{label:"E-mail",type:"text",placeholder:"E-mail",modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=i=>n.value=i),error:Z.value},null,8,["modelValue","error"])])]),e("div",Me,[e("div",$e,[we,e("div",Ue,[l(t(Q),{label:"Masculino",name:"gender",value:"Male",modelValue:s.value,"onUpdate:modelValue":c[3]||(c[3]=i=>s.value=i)},null,8,["modelValue"]),l(t(Q),{label:"Feminino",name:"gender",value:"Female",modelValue:s.value,"onUpdate:modelValue":c[4]||(c[4]=i=>s.value=i)},null,8,["modelValue"])]),e("p",Ne,q(D.value),1)])]),e("div",Te,[e("div",Se,[l(t(ae),{label:"Data de nascimento",name:"birth_date"},{default:p(()=>[l(H,{modelValue:h.value,"onUpdate:modelValue":c[5]||(c[5]=i=>h.value=i),class:"form-control",id:"birth_date",placeholder:"yyyy, dd M",birthError:I.value},null,8,["modelValue","birthError"]),e("p",Fe,q(I.value),1)]),_:1})])]),e("div",Re,[e("div",Ie,[l(t(R),{label:"Telefone 1",prepend:"(+258)",placeholder:"Telefone 1",name:"phoneNumber",isMask:"",modelValue:v.value,"onUpdate:modelValue":c[6]||(c[6]=i=>v.value=i),options:g.phoneValidate},null,8,["modelValue","options"])])]),e("div",Pe,[e("div",Be,[l(t(R),{label:"Telefone 2",prepend:"(+258)",placeholder:"Telefone 2",name:"phoneNumber",isMask:"",modelValue:V.value,"onUpdate:modelValue":c[7]||(c[7]=i=>V.value=i),options:g.phoneValidate},null,8,["modelValue","options"])])]),je,e("div",De,[e("div",Ge,[l(t(M),{label:"Nome do contato de emergência",type:"text",placeholder:"Nome do contato de emergência",modelValue:f.value,"onUpdate:modelValue":c[8]||(c[8]=i=>f.value=i),error:N.value},null,8,["modelValue","error"])])]),e("div",Oe,[e("div",qe,[l(t(R),{label:"Telefone do contato de emergência",prepend:"(+258)",placeholder:"Telefone do contato de emergência",name:"phoneNumber",isMask:"",modelValue:w.value,"onUpdate:modelValue":c[9]||(c[9]=i=>w.value=i),options:g.phoneValidate},null,8,["modelValue","options"]),e("p",ze,q(G.value),1)])])]),e("div",Ae,[l(t(B),{type:"button",text:"Cancelar",btnClass:"btn-outline-dark",onClick:d}),l(t(B),{text:"Cadastrar",btnClass:"btn-dark",type:"button",onClick:W})])]),_:1},8,["activeModal"])])}}};const Qe=b=>(de("data-v-59eb13a9"),b=b(),re(),b),Ze={class:"grid grid-cols-12 gap-4 p-4"},We={class:"col-span-12 md:col-span-6"},He={class:"text-base text-slate-600 dark:text-slate-300"},Je={class:"col-span-12 md:col-span-6"},Ke={class:"text-base text-slate-600 dark:text-slate-300"},Xe={class:"col-span-12 md:col-span-6"},Ye={class:"text-base text-slate-600 dark:text-slate-300"},et={class:"col-span-12 md:col-span-6"},tt={class:"text-base text-slate-600 dark:text-slate-300"},lt={class:"col-span-12 md:col-span-6"},at={class:"text-base text-slate-600 dark:text-slate-300"},ot={class:"col-span-12 md:col-span-6"},st={class:"text-base text-slate-600 dark:text-slate-300"},nt={class:"col-span-12 md:col-span-6"},dt={class:"text-base text-slate-600 dark:text-slate-300"},rt=Qe(()=>e("label",{class:"block mb-2"},"Gênero",-1)),it={class:"flex gap-5"},ct={class:"col-span-12 md:col-span-6"},ut={class:"text-base text-slate-600 dark:text-slate-300"},mt={class:"col-span-12 md:col-span-6"},pt={class:"text-base text-slate-600 dark:text-slate-300"},vt={class:"flex gap-5 mx-2 px-2"},_t={__name:"EditModal",props:{modalEditStatus:{type:Boolean,default:!1},initialData:{type:Object,default:()=>({})}},emits:["closeModelEdit","update"],setup(b,{emit:$}){const C=b,E={phoneValidate:{phone:!0,phoneRegionCode:"MZ"}},d=o({name:"",email:"",phone1:"",phone2:"",address:"",birth:"",gender:"",role:"",emergency_contact_name:"",emergency_contact:"",id:""});le(()=>C.initialData,a=>{var n,s,h,v,V,k,f;a&&(d.value={id:a.id,name:a.name||"",email:a.email||"",phone1:((n=a.client)==null?void 0:n.phone1)||"",phone2:((s=a.client)==null?void 0:s.phone2)||"",address:((h=a.client)==null?void 0:h.address)||"",birth:((v=a.client)==null?void 0:v.birth)||"",gender:((V=a.client)==null?void 0:V.gender)||"",role:a.role||"",emergency_contact_name:((k=a.client)==null?void 0:k.emergency_contact_name)||"",emergency_contact:((f=a.client)==null?void 0:f.emergency_contact)||""})},{immediate:!0});const g=()=>{$("closeModelEdit")},r=()=>{$("update",d.value)};return(a,n)=>(y(),F("div",null,[l(t(ee),{title:"Editar Cliente",label:"Editar Cliente",activeModal:b.modalEditStatus,onClose:g,sizeClass:"max-w-5xl"},{default:p(()=>[e("div",Ze,[e("div",We,[e("div",He,[l(t(M),{label:"Nome completo",type:"text",placeholder:"Nome completo",modelValue:d.value.name,"onUpdate:modelValue":n[0]||(n[0]=s=>d.value.name=s)},null,8,["modelValue"])])]),e("div",Je,[e("div",Ke,[l(t(M),{label:"E-mail",type:"email",placeholder:"E-mail",modelValue:d.value.email,"onUpdate:modelValue":n[1]||(n[1]=s=>d.value.email=s)},null,8,["modelValue"])])]),e("div",Xe,[e("div",Ye,[l(t(R),{label:"Telefone 1",prepend:"(+258)",placeholder:"Telefone 1",modelValue:d.value.phone1,"onUpdate:modelValue":n[2]||(n[2]=s=>d.value.phone1=s),isMask:"",options:E.phoneValidate},null,8,["modelValue","options"])])]),e("div",et,[e("div",tt,[l(t(R),{label:"Telefone 2",prepend:"(+258)",placeholder:"Telefone 2",modelValue:d.value.phone2,"onUpdate:modelValue":n[3]||(n[3]=s=>d.value.phone2=s),isMask:"",options:E.phoneValidate},null,8,["modelValue","options"])])]),e("div",lt,[e("div",at,[l(t(M),{label:"Endereço",type:"text",placeholder:"Endereço",modelValue:d.value.address,"onUpdate:modelValue":n[4]||(n[4]=s=>d.value.address=s)},null,8,["modelValue"])])]),e("div",ot,[e("div",st,[l(t(ae),{label:"Data de Nascimento",name:"birth_date"},{default:p(()=>[l(t(ne),{modelValue:d.value.birth,"onUpdate:modelValue":n[5]||(n[5]=s=>d.value.birth=s),class:"form-control",id:"birth_date",placeholder:"yyyy, dd M"},null,8,["modelValue"])]),_:1})])]),e("div",nt,[e("div",dt,[rt,e("div",it,[l(t(Q),{label:"Masculino",name:"gender",value:"Male",modelValue:d.value.gender,"onUpdate:modelValue":n[6]||(n[6]=s=>d.value.gender=s)},null,8,["modelValue"]),l(t(Q),{label:"Feminino",name:"gender",value:"Female",modelValue:d.value.gender,"onUpdate:modelValue":n[7]||(n[7]=s=>d.value.gender=s)},null,8,["modelValue"])])])]),e("div",ct,[e("div",ut,[l(t(M),{label:"Nome do Contato de Emergência",type:"text",placeholder:"Nome do Contato de Emergência",modelValue:d.value.emergency_contact_name,"onUpdate:modelValue":n[8]||(n[8]=s=>d.value.emergency_contact_name=s)},null,8,["modelValue"])])]),e("div",mt,[e("div",pt,[l(t(R),{label:"Telefone do Contato de Emergência",prepend:"(+258)",placeholder:"Telefone do Contato de Emergência",modelValue:d.value.emergency_contact,"onUpdate:modelValue":n[9]||(n[9]=s=>d.value.emergency_contact=s),isMask:"",options:E.phoneValidate},null,8,["modelValue","options"])])])]),e("div",vt,[l(t(B),{type:"button",text:"Cancelar",btnClass:"btn-outline-dark",onClick:g}),l(t(B),{text:"Salvar",btnClass:"btn-dark",type:"button",onClick:r})])]),_:1},8,["activeModal"])]))}},ht=se(_t,[["__scopeId","data-v-59eb13a9"]]),bt={key:0},gt={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},ft=e("h5",null,"Funcionarios",-1),xt={key:0},yt={style:{"text-transform":"lowercase"}},Ct={key:1},Vt={style:{"text-transform":"lowercase"}},kt={key:2,class:"flex justify-center"},Et={class:"flex space-x-3 rtl:space-x-reverse"},Mt=["onClick"],$t=e("span",null," Edit",-1),wt=["onClick"],Ut=e("span",null," Edit",-1),Nt=["onClick"],Tt=e("span",null,"Delete",-1),St={class:"py-4 px-3"},At={__name:"indexPage",setup(b){const $=ge(),{createUser:C,deleteClient:E,updateClient:d}=$,g=o(0),r=o([]);o([]);const a=ie(),n=o(null),s=o(!1),h=o([]),v=o(!1);ce();const V=localStorage.getItem("sigt_user_role"),k=async()=>{try{const u=await P.get("client");r.value=u.data,g.value=u.data.length}catch(u){console.error("Failed to fetch courses:",u)}};ue(()=>{k()});const f=o(1),w=o(10),j=o(5),U=o("");o([{name:"view",icon:"heroicons-outline:eye"},{name:"edit",icon:"heroicons:pencil-square"},{name:"delete",icon:"heroicons-outline:trash"}]);const Z=o([{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}]),D=o([{label:"Id",field:"id"},{label:"Nome do usuario",field:"name"},{label:"E-mail",field:"email"},{label:"Action",field:"action"}]),I=async u=>{var x,A;v.value=!0;try{const T=await C(u);a.success("cliente criada com sucesso",{timeout:2e3}),k()}catch(T){if(T.response.data.message,!(T.response&&T.response.status===401)){const m=((A=(x=T.response)==null?void 0:x.data)==null?void 0:A.message)||"Ocorreu um erro desconhecido";a.error(m,{timeout:2e3})}}finally{v.value=!1}},z=u=>{n.value=u,s.value=!0},N=()=>{s.value=!1,n.value=null},G=async()=>{v.value=!0;try{const u=await E(n.value);a.success("usuario removido com sucesso",{timeout:2e3}),k()}catch(u){a.error("Nao foi possivel remover a usuario | "+u,{timeout:2e3})}finally{v.value=!1,N()}},O=o(!1),W=u=>{O.value=!0,h.value=u,console.log(h)},_=()=>{O.value=!1},c=async u=>{v.value=!0,_();try{const x=await d(u);a.success("cliente editado com sucesso",{timeout:2e3}),k()}catch(x){a.error("Nao foi possivel editar a cliente | "+x,{timeout:2e3})}finally{v.value=!1}},H=me(),i=o(!1);return le(()=>H.name,u=>{u==="employees.details.index"?i.value=!0:i.value=!1}),(u,x)=>{const A=Y("router-view"),T=Y("vue-good-table");return y(),F("div",null,[v.value?(y(),F("div",bt,[l(t(he))])):S("",!0),l(A),pe(e("div",null,[l(t(_e),{noborder:""},{default:p(()=>[e("div",null,[l(t(Le),{onCreateEmployeeModal:I,class:"py-5"}),e("div",gt,[ft,l(t(R),{modelValue:U.value,"onUpdate:modelValue":x[0]||(x[0]=m=>U.value=m),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"])])]),l(T,{columns:D.value,styleClass:" vgt-table bordered centered lowercase",rows:r.value,"pagination-options":{enabled:!0,perPage:w.value},"search-options":{enabled:!0,externalQuery:U.value},"select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0}},{"table-row":p(m=>[m.column.field=="username"?(y(),F("span",xt,[e("span",yt,q(m.row.username),1)])):S("",!0),m.column.field=="email"?(y(),F("span",Ct,[e("span",Vt,q(m.row.email),1)])):S("",!0),m.column.field=="action"?(y(),F("span",kt,[e("div",Et,[t(V)=="secretary"&&m.row.role!=="admin"?(y(),J(t(X),{key:0,placement:"top",arrow:"",theme:"danger-500"},{button:p(()=>[e("div",{class:"action-btn",onClick:L=>u.toggleEditDelete(m.row)},[l(t(K),{icon:"heroicons:pencil-square"})],8,Mt)]),default:p(()=>[$t]),_:2},1024)):S("",!0),t(V)=="admin"?(y(),J(t(X),{key:1,placement:"top",arrow:"",theme:"danger-500"},{button:p(()=>[e("div",{class:"action-btn",onClick:L=>W(m.row)},[l(t(K),{icon:"heroicons:pencil-square"})],8,wt)]),default:p(()=>[Ut]),_:2},1024)):S("",!0),t(V)==="admin"?(y(),J(t(X),{key:2,placement:"top",arrow:"",theme:"danger-500"},{button:p(()=>[e("div",{class:"action-btn",onClick:L=>z(m.row)},[l(t(K),{icon:"heroicons:trash"})],8,Nt)]),default:p(()=>[Tt]),_:2},1024)):S("",!0)])])):S("",!0)]),"pagination-bottom":p(m=>[e("div",St,[l(t(be),{total:g.value,current:f.value,"per-page":w.value,pageRange:j.value,onPageChanged:x[1]||(x[1]=L=>f.value=L),pageChanged:m.pageChanged,perPageChanged:m.perPageChanged,enableSearch:"",enableSelect:"",options:Z.value},{default:p(()=>[te(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])]),_:1}),l(t(ee),{title:"Basic Modal",label:"Modal title",activeModal:s.value,onClose:N},{footer:p(()=>[l(t(B),{text:"Cancelar",btnClass:"btn-outline-dark",onClick:N}),l(t(B),{text:"Confirmar",btnClass:"btn-dark ",onClick:G})]),default:p(()=>[te(" Lorem ipsum dolor sit amet, consec tetur adipiscing elit, sed do eiusmod tempor incididun ut . ")]),_:1},8,["activeModal"]),l(t(ht),{modalEditStatus:O.value,onCloseModelEdit:_,initialData:h.value,onUpdate:c},null,8,["modalEditStatus","initialData"])],512),[[ve,!i.value]])])}}};export{At as default};
