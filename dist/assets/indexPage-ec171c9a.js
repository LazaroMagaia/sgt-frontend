import{r as o,c as H,o as f,d as E,f as e,e as a,w as _,j as l,L as T,_ as te,s as le,ab as se,Q as ne,R as de,u as re,a as ie,m as ce,N as ue,g as w,U as me,a6 as pe,W as ve,M as K,h as X}from"./index-5257d121.js";import{u as _e}from"./employee-eef1fe12.js";import{C as be}from"./index-ee012d29.js";import{I as Y}from"./index-a99f37f1.js";import{I as F,B,M as J,_ as he,T as ee,P as ge}from"./loadingPage-d0b9612f.js";import{T as M}from"./index-0ce5dbaa.js";import{F as ae}from"./index-a8f31531.js";import{R as Q}from"./index-2f50d0f9.js";import{S as oe}from"./index-ac72f062.js";import"./cleave-phone.mz-1deb776e.js";import"./transition-f4c2e5eb.js";import"./use-outside-click-507e6bef.js";const fe={class:"grid grid-cols-12 gap-4 p-4"},xe={class:"col-span-12 md:col-span-6"},ye={class:"text-base text-slate-600 dark:text-slate-300"},Ve={class:"col-span-12 md:col-span-6"},ke={class:"text-base text-slate-600 dark:text-slate-300"},Ce={class:"col-span-12 md:col-span-6"},Ee={class:"text-base text-slate-600 dark:text-slate-300"},Me={class:"col-span-12 md:col-span-6"},$e={class:"text-base text-slate-600 dark:text-slate-300"},Ue=e("label",{class:"block mb-2"},"Sexo",-1),Ne={class:"flex gap-5"},Se={class:"mt-2 text-danger-500 block text-sm"},we={class:"col-span-12 md:col-span-6"},Te={class:"text-base text-slate-600 dark:text-slate-300"},Fe={class:"mt-2 text-danger-500 block text-sm"},Re={class:"col-span-12 md:col-span-6"},Ie={class:"text-base text-slate-600 dark:text-slate-300"},Pe={class:"mt-2 text-danger-500 block text-sm"},Be={class:"col-span-12 md:col-span-6"},De={class:"text-base text-slate-600 dark:text-slate-300"},je={class:"mt-2 text-danger-500 block text-sm"},Ae={class:"col-span-12 md:col-span-6"},Ge={class:"text-base text-slate-600 dark:text-slate-300"},Oe=e("div",{class:"col-span-12 md:col-span-12"},[e("div",{class:"relative flex items-center justify-center my-4"},[e("div",{class:"absolute inset-0 flex items-center"},[e("hr",{class:"flex-1 border-t border-gray-300"})]),e("span",{class:"relative px-4 text-gray-500 bg-white"},"Contacto de emergência")])],-1),ze={class:"col-span-12 md:col-span-6"},qe={class:"text-base text-slate-600 dark:text-slate-300"},Le={class:"col-span-12 md:col-span-6"},Qe={class:"text-base text-slate-600 dark:text-slate-300"},Ze={class:"mt-2 text-danger-500 block text-sm"},We={class:"flex gap-5 mx-2 px-2"},He={__name:"createModal",emits:["CreateEmployeeModal"],setup(k,{emit:R}){const C=o(!1),D=()=>{C.value=!C.value},x=()=>{C.value=!1},d=[{value:"admin",label:"Admin"},{value:"secretary",label:"Secretária"}],y={phoneValidate:{phone:!0,phoneRegionCode:"MZ"}},u=o(""),c=o(""),t=o(""),s=o(""),m=o(""),b=o(""),V=o(""),h=o(""),g=o(""),I=o(""),$=o(""),j=o(""),A=o(""),G=o(""),P=o(""),U=o(""),O=o(""),N=o(""),z=o(""),q=()=>{let p=!0;return u.value?$.value="":($.value="Nome é obrigatório",p=!1),!t.value||!t.value.includes("@")?(A.value="E-mail inválido",p=!1):A.value="",c.value?j.value="":(j.value="Endereço é obrigatório",p=!1),s.value?G.value="":(G.value="Sexo é obrigatório",p=!1),m.value?P.value="":(P.value="Data de nascimento é obrigatória",p=!1),b.value?U.value="":(U.value="Telefone 1 é obrigatório",p=!1),h.value?O.value="":(O.value="o nivel de acesso é obrigatório",p=!1),g.value?N.value="":(N.value="Nome do contato de emergência é obrigatório",p=!1),I.value?z.value="":(z.value="Contato de emergência é obrigatório",p=!1),p},Z=()=>{if(q()){const p={email:t.value,name:u.value,birth:m.value,gender:s.value,phone1:b.value,address:c.value,role:h.value,emergency_contact_name:g.value,emergency_contact:I.value};R("CreateEmployeeModal",p),x()}else console.log("Formulário inválido")};return(p,r)=>{const i=H("flat-pickr");return f(),E("div",null,[e("button",{onClick:D,class:"btn inline-flex justify-center btn-outline-dark"},"Novo funcionário"),a(l(J),{title:"Novo funcionário",label:"Novo funcionário",activeModal:C.value,onClose:x,sizeClass:"max-w-5xl"},{default:_(()=>[e("div",fe,[e("div",xe,[e("div",ye,[a(l(M),{label:"Nome completo",type:"text",placeholder:"Nome completo",modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=n=>u.value=n),error:$.value},null,8,["modelValue","error"])])]),e("div",Ve,[e("div",ke,[a(l(M),{label:"Endereço",type:"text",placeholder:"Endereço",modelValue:c.value,"onUpdate:modelValue":r[1]||(r[1]=n=>c.value=n),error:j.value},null,8,["modelValue","error"])])]),e("div",Ce,[e("div",Ee,[a(l(M),{label:"E-mail",type:"text",placeholder:"E-mail",modelValue:t.value,"onUpdate:modelValue":r[2]||(r[2]=n=>t.value=n),error:A.value},null,8,["modelValue","error"])])]),e("div",Me,[e("div",$e,[Ue,e("div",Ne,[a(l(Q),{label:"Masculino",name:"gender",value:"Male",modelValue:s.value,"onUpdate:modelValue":r[3]||(r[3]=n=>s.value=n)},null,8,["modelValue"]),a(l(Q),{label:"Feminino",name:"gender",value:"Female",modelValue:s.value,"onUpdate:modelValue":r[4]||(r[4]=n=>s.value=n)},null,8,["modelValue"])]),e("p",Se,T(G.value),1)])]),e("div",we,[e("div",Te,[a(l(ae),{label:"Data de nascimento",name:"birth_date"},{default:_(()=>[a(i,{modelValue:m.value,"onUpdate:modelValue":r[5]||(r[5]=n=>m.value=n),class:"form-control",id:"birth_date",placeholder:"yyyy, dd M",birthError:P.value},null,8,["modelValue","birthError"]),e("p",Fe,T(P.value),1)]),_:1})])]),e("div",Re,[e("div",Ie,[a(l(oe),{label:"Nivel de acesso",options:d,modelValue:h.value,"onUpdate:modelValue":r[6]||(r[6]=n=>h.value=n)},null,8,["modelValue"]),e("p",Pe,T(O.value),1)])]),e("div",Be,[e("div",De,[a(l(F),{label:"Telefone 1",prepend:"(+258)",placeholder:"Telefone 1",name:"phoneNumber",isMask:"",modelValue:b.value,"onUpdate:modelValue":r[7]||(r[7]=n=>b.value=n),options:y.phoneValidate},null,8,["modelValue","options"]),e("p",je,T(U.value),1)])]),e("div",Ae,[e("div",Ge,[a(l(F),{label:"Telefone 2",prepend:"(+258)",placeholder:"Telefone 2",name:"phoneNumber",isMask:"",modelValue:V.value,"onUpdate:modelValue":r[8]||(r[8]=n=>V.value=n),options:y.phoneValidate},null,8,["modelValue","options"])])]),Oe,e("div",ze,[e("div",qe,[a(l(M),{label:"Nome do contato de emergência",type:"text",placeholder:"Nome do contato de emergência",modelValue:g.value,"onUpdate:modelValue":r[9]||(r[9]=n=>g.value=n),error:N.value},null,8,["modelValue","error"])])]),e("div",Le,[e("div",Qe,[a(l(F),{label:"Telefone do contato de emergência",prepend:"(+258)",placeholder:"Telefone do contato de emergência",name:"phoneNumber",isMask:"",modelValue:I.value,"onUpdate:modelValue":r[10]||(r[10]=n=>I.value=n),options:y.phoneValidate},null,8,["modelValue","options"]),e("p",Ze,T(z.value),1)])])]),e("div",We,[a(l(B),{type:"button",text:"Cancelar",btnClass:"btn-outline-dark",onClick:x}),a(l(B),{text:"Cadastrar",btnClass:"btn-dark",type:"button",onClick:Z})])]),_:1},8,["activeModal"])])}}};const Je=k=>(ne("data-v-4c0d9e7a"),k=k(),de(),k),Ke={class:"grid grid-cols-12 gap-4 p-4"},Xe={class:"col-span-12 md:col-span-6"},Ye={class:"text-base text-slate-600 dark:text-slate-300"},el={class:"col-span-12 md:col-span-6"},ll={class:"text-base text-slate-600 dark:text-slate-300"},al={class:"col-span-12 md:col-span-6"},ol={class:"text-base text-slate-600 dark:text-slate-300"},tl={class:"col-span-12 md:col-span-6"},sl={class:"text-base text-slate-600 dark:text-slate-300"},nl={class:"col-span-12 md:col-span-6"},dl={class:"text-base text-slate-600 dark:text-slate-300"},rl={class:"col-span-12 md:col-span-6"},il={class:"text-base text-slate-600 dark:text-slate-300"},cl={class:"col-span-12 md:col-span-6"},ul={class:"text-base text-slate-600 dark:text-slate-300"},ml=Je(()=>e("label",{class:"block mb-2"},"Gênero",-1)),pl={class:"flex gap-5"},vl={class:"col-span-12 md:col-span-6"},_l={class:"text-base text-slate-600 dark:text-slate-300"},bl={class:"col-span-12 md:col-span-6"},hl={class:"text-base text-slate-600 dark:text-slate-300"},gl={class:"col-span-12 md:col-span-6"},fl={class:"text-base text-slate-600 dark:text-slate-300"},xl={class:"flex gap-5 mx-2 px-2"},yl={__name:"EditModal",props:{modalEditStatus:{type:Boolean,default:!1},initialData:{type:Object,default:()=>({})}},emits:["closeModelEdit","update"],setup(k,{emit:R}){const C=k,D=[{value:"admin",label:"Admin"},{value:"secretary",label:"Secretária"}],x={phoneValidate:{phone:!0,phoneRegionCode:"MZ"}},d=o({name:"",email:"",phone1:"",phone2:"",address:"",birth:"",gender:"",role:"",emergency_contact_name:"",emergency_contact:"",id:""});le(()=>C.initialData,c=>{var t,s,m,b,V,h,g;c&&(d.value={id:c.id,name:c.name||"",email:c.email||"",phone1:((t=c.employee)==null?void 0:t.phone1)||"",phone2:((s=c.employee)==null?void 0:s.phone2)||"",address:((m=c.employee)==null?void 0:m.address)||"",birth:((b=c.employee)==null?void 0:b.birth)||"",gender:((V=c.employee)==null?void 0:V.gender)||"",role:c.role||"",emergency_contact_name:((h=c.employee)==null?void 0:h.emergency_contact_name)||"",emergency_contact:((g=c.employee)==null?void 0:g.emergency_contact)||""})},{immediate:!0});const y=()=>{R("closeModelEdit")},u=()=>{R("update",d.value)};return(c,t)=>(f(),E("div",null,[a(l(J),{title:"Editar Funcionário",label:"Editar Funcionário",activeModal:k.modalEditStatus,onClose:y,sizeClass:"max-w-5xl"},{default:_(()=>[e("div",Ke,[e("div",Xe,[e("div",Ye,[a(l(M),{label:"Nome completo",type:"text",placeholder:"Nome completo",modelValue:d.value.name,"onUpdate:modelValue":t[0]||(t[0]=s=>d.value.name=s)},null,8,["modelValue"])])]),e("div",el,[e("div",ll,[a(l(M),{label:"E-mail",type:"email",placeholder:"E-mail",modelValue:d.value.email,"onUpdate:modelValue":t[1]||(t[1]=s=>d.value.email=s)},null,8,["modelValue"])])]),e("div",al,[e("div",ol,[a(l(F),{label:"Telefone 1",prepend:"(+258)",placeholder:"Telefone 1",modelValue:d.value.phone1,"onUpdate:modelValue":t[2]||(t[2]=s=>d.value.phone1=s),isMask:"",options:x.phoneValidate},null,8,["modelValue","options"])])]),e("div",tl,[e("div",sl,[a(l(F),{label:"Telefone 2",prepend:"(+258)",placeholder:"Telefone 2",modelValue:d.value.phone2,"onUpdate:modelValue":t[3]||(t[3]=s=>d.value.phone2=s),isMask:"",options:x.phoneValidate},null,8,["modelValue","options"])])]),e("div",nl,[e("div",dl,[a(l(M),{label:"Endereço",type:"text",placeholder:"Endereço",modelValue:d.value.address,"onUpdate:modelValue":t[4]||(t[4]=s=>d.value.address=s)},null,8,["modelValue"])])]),e("div",rl,[e("div",il,[a(l(ae),{label:"Data de Nascimento",name:"birth_date"},{default:_(()=>[a(l(se),{modelValue:d.value.birth,"onUpdate:modelValue":t[5]||(t[5]=s=>d.value.birth=s),class:"form-control",id:"birth_date",placeholder:"yyyy, dd M"},null,8,["modelValue"])]),_:1})])]),e("div",cl,[e("div",ul,[ml,e("div",pl,[a(l(Q),{label:"Masculino",name:"gender",value:"Male",modelValue:d.value.gender,"onUpdate:modelValue":t[6]||(t[6]=s=>d.value.gender=s)},null,8,["modelValue"]),a(l(Q),{label:"Feminino",name:"gender",value:"Female",modelValue:d.value.gender,"onUpdate:modelValue":t[7]||(t[7]=s=>d.value.gender=s)},null,8,["modelValue"])])])]),e("div",vl,[e("div",_l,[a(l(oe),{label:"Role",options:D,modelValue:d.value.role,"onUpdate:modelValue":t[8]||(t[8]=s=>d.value.role=s)},null,8,["modelValue"])])]),e("div",bl,[e("div",hl,[a(l(M),{label:"Nome do Contato de Emergência",type:"text",placeholder:"Nome do Contato de Emergência",modelValue:d.value.emergency_contact_name,"onUpdate:modelValue":t[9]||(t[9]=s=>d.value.emergency_contact_name=s)},null,8,["modelValue"])])]),e("div",gl,[e("div",fl,[a(l(F),{label:"Telefone do Contato de Emergência",prepend:"(+258)",placeholder:"Telefone do Contato de Emergência",modelValue:d.value.emergency_contact,"onUpdate:modelValue":t[10]||(t[10]=s=>d.value.emergency_contact=s),isMask:"",options:x.phoneValidate},null,8,["modelValue","options"])])])]),e("div",xl,[a(l(B),{type:"button",text:"Cancelar",btnClass:"btn-outline-dark",onClick:y}),a(l(B),{text:"Salvar",btnClass:"btn-dark",type:"button",onClick:u})])]),_:1},8,["activeModal"])]))}},Vl=te(yl,[["__scopeId","data-v-4c0d9e7a"]]),kl={key:0},Cl={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},El=e("h5",null,"Funcionarios",-1),Ml={key:0},$l={style:{"text-transform":"lowercase"}},Ul={key:1},Nl={style:{"text-transform":"lowercase"}},Sl={key:2,class:"flex justify-center"},wl={key:0,class:"flex space-x-3 rtl:space-x-reverse"},Tl=["onClick"],Fl=e("span",null,"Edit",-1),Rl=["onClick"],Il=e("span",null,"Delete",-1),Pl={class:"py-4 px-3"},Hl={__name:"indexPage",setup(k){const R=_e(),{createUser:C,deleteEmployee:D,updateEmployee:x}=R,d=o(0),y=o([]),u=re(),c=o(null),t=o(!1),s=o([]),m=o(!1);ie();const b=localStorage.getItem("sigt_user_role"),V=async()=>{try{const i=await ve.get("employee");y.value=i.data,d.value=i.data.length}catch(i){console.error("Failed to fetch courses:",i)}};ce(()=>{V()});const h=o(1),g=o(10),I=o(5),$=o("");o([{name:"view",icon:"heroicons-outline:eye"},{name:"edit",icon:"heroicons:pencil-square"},{name:"delete",icon:"heroicons-outline:trash"}]);const j=o([{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}]),A=o([{label:"Id",field:"id"},{label:"Nome do usuario",field:"name"},{label:"E-mail",field:"email"},{label:"Action",field:"action"}]),G=async i=>{var n,L;m.value=!0;try{const S=await C(i);u.success("funcionario criada com sucesso",{timeout:2e3}),V()}catch(S){if(S.response.data.message,!(S.response&&S.response.status===401)){const v=((L=(n=S.response)==null?void 0:n.data)==null?void 0:L.message)||"Ocorreu um erro desconhecido";u.error(v,{timeout:2e3})}}finally{m.value=!1}},P=i=>{c.value=i,t.value=!0},U=()=>{t.value=!1,c.value=null},O=async()=>{m.value=!0;try{const i=await D(c.value);u.success("funcionario removido com sucesso",{timeout:2e3})}catch(i){if(i.data&&i.data.response){const n=i.data.response||"Erro inesperado";u.error(n,{timeout:2e3})}else u.error("Falha ao remover o funcionario",{timeout:2e3})}finally{m.value=!1,U()}},N=o(!1),z=i=>{N.value=!0,s.value=i,console.log(s)},q=()=>{N.value=!1},Z=async i=>{m.value=!0,q(),console.log("Dados atualizados:",i);try{(await x(i)).success?(u.success("funcionario editada com sucesso",{timeout:2e3}),V()):u.error("Nao foi possivel editar a funcionario ",{timeout:2e3})}catch(n){u.error("Nao foi possivel editar a funcionario | "+n,{timeout:2e3})}finally{m.value=!1}},p=ue(),r=o(!1);return le(()=>p.name,i=>{i==="employees.details.index"?r.value=!0:r.value=!1}),(i,n)=>{const L=H("router-view"),S=H("vue-good-table");return f(),E("div",null,[m.value?(f(),E("div",kl,[a(l(he))])):w("",!0),a(L),me(e("div",null,[a(l(be),{noborder:""},{default:_(()=>[e("div",null,[a(l(He),{onCreateEmployeeModal:G,class:"py-5"}),e("div",Cl,[El,a(l(F),{modelValue:$.value,"onUpdate:modelValue":n[0]||(n[0]=v=>$.value=v),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"])])]),a(S,{columns:A.value,styleClass:" vgt-table bordered centered lowercase",rows:y.value,"pagination-options":{enabled:!0,perPage:g.value},"search-options":{enabled:!0,externalQuery:$.value},"select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0}},{"table-row":_(v=>[v.column.field=="username"?(f(),E("span",Ml,[e("span",$l,T(v.row.username),1)])):w("",!0),v.column.field=="email"?(f(),E("span",Ul,[e("span",Nl,T(v.row.email),1)])):w("",!0),v.column.field=="action"?(f(),E("span",Sl,[l(b)!=="secretary"?(f(),E("div",wl,[l(b)=="admin"?(f(),K(l(ee),{key:0,placement:"top",arrow:"",theme:"danger-500"},{button:_(()=>[e("div",{class:"action-btn",onClick:W=>z(v.row)},[a(l(Y),{icon:"heroicons:pencil-square"})],8,Tl)]),default:_(()=>[Fl]),_:2},1024)):w("",!0),l(b)=="admin"?(f(),K(l(ee),{key:1,placement:"top",arrow:"",theme:"danger-500"},{button:_(()=>[e("div",{class:"action-btn",onClick:W=>P(v.row)},[a(l(Y),{icon:"heroicons:trash"})],8,Rl)]),default:_(()=>[Il]),_:2},1024)):w("",!0)])):w("",!0)])):w("",!0)]),"pagination-bottom":_(v=>[e("div",Pl,[a(l(ge),{total:d.value,current:h.value,"per-page":g.value,pageRange:I.value,onPageChanged:n[1]||(n[1]=W=>h.value=W),pageChanged:v.pageChanged,perPageChanged:v.perPageChanged,enableSearch:"",enableSelect:"",options:j.value},{default:_(()=>[X(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])]),_:1}),a(l(J),{title:"Basic Modal",label:"Modal title",activeModal:t.value,onClose:U},{footer:_(()=>[a(l(B),{text:"Cancelar",btnClass:"btn-outline-dark",onClick:U}),a(l(B),{text:"Confirmar",btnClass:"btn-dark ",onClick:O})]),default:_(()=>[X(" Lorem ipsum dolor sit amet, consec tetur adipiscing elit, sed do eiusmod tempor incididun ut . ")]),_:1},8,["activeModal"]),a(l(Vl),{modalEditStatus:N.value,onCloseModelEdit:q,initialData:s.value,onUpdate:Z},null,8,["modalEditStatus","initialData"])],512),[[pe,!r.value]])])}}};export{Hl as default};
