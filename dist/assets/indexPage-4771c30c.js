import{r as a,c as X,o as g,d as S,f as e,e as t,w as m,j as o,L as q,_ as ae,s as oe,ab as le,Q as se,R as ne,u as de,a as ie,m as re,N as ce,g as T,U as ue,a6 as me,W as pe,M as H,h as ee}from"./index-d6a89262.js";import{u as ve}from"./employee-391d2280.js";import{C as _e}from"./index-869aef5d.js";import{I as J}from"./index-e45e772a.js";import{I as R,B as P,M as Y,_ as he,T as K,P as be}from"./loadingPage-a08ab592.js";import{T as E}from"./index-beae8ee6.js";import{F as te}from"./index-d3a8479b.js";import{R as Q}from"./index-c5a7972a.js";import"./index-893b8763.js";import"./cleave-phone.mz-1deb776e.js";import"./transition-1703bf96.js";import"./use-outside-click-3be35feb.js";const ge={class:"grid grid-cols-12 gap-4 p-4"},fe={class:"col-span-12 md:col-span-6"},xe={class:"text-base text-slate-600 dark:text-slate-300"},ye={class:"col-span-12 md:col-span-6"},Ve={class:"text-base text-slate-600 dark:text-slate-300"},ke={class:"col-span-12 md:col-span-6"},Ce={class:"text-base text-slate-600 dark:text-slate-300"},Ee={class:"col-span-12 md:col-span-6"},Me={class:"text-base text-slate-600 dark:text-slate-300"},$e=e("label",{class:"block mb-2"},"Sexo",-1),Ne={class:"flex gap-5"},we={class:"mt-2 text-danger-500 block text-sm"},Ue={class:"col-span-12 md:col-span-6"},Te={class:"text-base text-slate-600 dark:text-slate-300"},Se={class:"mt-2 text-danger-500 block text-sm"},Re={class:"col-span-12 md:col-span-6"},Fe={class:"text-base text-slate-600 dark:text-slate-300"},Ie={class:"col-span-12 md:col-span-6"},Pe={class:"text-base text-slate-600 dark:text-slate-300"},Be=e("div",{class:"col-span-12 md:col-span-12"},[e("div",{class:"relative flex items-center justify-center my-4"},[e("div",{class:"absolute inset-0 flex items-center"},[e("hr",{class:"flex-1 border-t border-gray-300"})]),e("span",{class:"relative px-4 text-gray-500 bg-white"},"Contacto de emergência")])],-1),De={class:"col-span-12 md:col-span-6"},je={class:"text-base text-slate-600 dark:text-slate-300"},Ge={class:"col-span-12 md:col-span-6"},Oe={class:"text-base text-slate-600 dark:text-slate-300"},qe={class:"mt-2 text-danger-500 block text-sm"},ze={class:"flex gap-5 mx-2 px-2"},Ae={__name:"createModal",emits:["CreateEmployeeModal"],setup(k,{emit:F}){const C=a(!1),M=()=>{C.value=!C.value},n=()=>{C.value=!1},f={phoneValidate:{phone:!0,phoneRegionCode:"MZ"}},x=a(""),d=a(""),l=a(""),s=a(""),_=a(""),p=a(""),y=a(""),V=a("driver"),h=a(""),$=a(""),B=a(""),N=a(""),D=a(""),j=a(""),I=a(""),z=a("");a("");const w=a(""),G=a(""),O=()=>{let v=!0;return x.value?B.value="":(B.value="Nome é obrigatório",v=!1),!l.value||!l.value.includes("@")?(D.value="E-mail inválido",v=!1):D.value="",d.value?N.value="":(N.value="Endereço é obrigatório",v=!1),s.value?j.value="":(j.value="Sexo é obrigatório",v=!1),_.value?I.value="":(I.value="Data de nascimento é obrigatória",v=!1),p.value?z.value="":(z.value="Telefone 1 é obrigatório",v=!1),h.value?w.value="":(w.value="Nome do contato de emergência é obrigatório",v=!1),$.value?G.value="":(G.value="Contato de emergência é obrigatório",v=!1),v},Z=()=>{if(O()){const v={email:l.value,name:x.value,birth:_.value,gender:s.value,phone1:p.value,address:d.value,role:V.value,emergency_contact_name:h.value,emergency_contact:$.value};F("CreateEmployeeModal",v),n()}else console.log("Formulário inválido")};return(v,r)=>{const W=X("flat-pickr");return g(),S("div",null,[e("button",{onClick:M,class:"btn inline-flex justify-center btn-outline-dark"},"Novo Motorista"),t(o(Y),{title:"Novo Motorista",label:"Novo Motorista",activeModal:C.value,onClose:n,sizeClass:"max-w-5xl"},{default:m(()=>[e("div",ge,[e("div",fe,[e("div",xe,[t(o(E),{label:"Nome completo",type:"text",placeholder:"Nome completo",modelValue:x.value,"onUpdate:modelValue":r[0]||(r[0]=i=>x.value=i),error:B.value},null,8,["modelValue","error"])])]),e("div",ye,[e("div",Ve,[t(o(E),{label:"Endereço",type:"text",placeholder:"Endereço",modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=i=>d.value=i),error:N.value},null,8,["modelValue","error"])])]),e("div",ke,[e("div",Ce,[t(o(E),{label:"E-mail",type:"text",placeholder:"E-mail",modelValue:l.value,"onUpdate:modelValue":r[2]||(r[2]=i=>l.value=i),error:D.value},null,8,["modelValue","error"])])]),e("div",Ee,[e("div",Me,[$e,e("div",Ne,[t(o(Q),{label:"Masculino",name:"gender",value:"Male",modelValue:s.value,"onUpdate:modelValue":r[3]||(r[3]=i=>s.value=i)},null,8,["modelValue"]),t(o(Q),{label:"Feminino",name:"gender",value:"Female",modelValue:s.value,"onUpdate:modelValue":r[4]||(r[4]=i=>s.value=i)},null,8,["modelValue"])]),e("p",we,q(j.value),1)])]),e("div",Ue,[e("div",Te,[t(o(te),{label:"Data de nascimento",name:"birth_date"},{default:m(()=>[t(W,{modelValue:_.value,"onUpdate:modelValue":r[5]||(r[5]=i=>_.value=i),class:"form-control",id:"birth_date",placeholder:"yyyy, dd M",birthError:I.value},null,8,["modelValue","birthError"]),e("p",Se,q(I.value),1)]),_:1})])]),e("div",Re,[e("div",Fe,[t(o(R),{label:"Telefone 1",prepend:"(+258)",placeholder:"Telefone 1",name:"phoneNumber",isMask:"",modelValue:p.value,"onUpdate:modelValue":r[6]||(r[6]=i=>p.value=i),options:f.phoneValidate},null,8,["modelValue","options"])])]),e("div",Ie,[e("div",Pe,[t(o(R),{label:"Telefone 2",prepend:"(+258)",placeholder:"Telefone 2",name:"phoneNumber",isMask:"",modelValue:y.value,"onUpdate:modelValue":r[7]||(r[7]=i=>y.value=i),options:f.phoneValidate},null,8,["modelValue","options"])])]),Be,e("div",De,[e("div",je,[t(o(E),{label:"Nome do contato de emergência",type:"text",placeholder:"Nome do contato de emergência",modelValue:h.value,"onUpdate:modelValue":r[8]||(r[8]=i=>h.value=i),error:w.value},null,8,["modelValue","error"])])]),e("div",Ge,[e("div",Oe,[t(o(R),{label:"Telefone do contato de emergência",prepend:"(+258)",placeholder:"Telefone do contato de emergência",name:"phoneNumber",isMask:"",modelValue:$.value,"onUpdate:modelValue":r[9]||(r[9]=i=>$.value=i),options:f.phoneValidate},null,8,["modelValue","options"]),e("p",qe,q(G.value),1)])])]),e("div",ze,[t(o(P),{type:"button",text:"Cancelar",btnClass:"btn-outline-dark",onClick:n}),t(o(P),{text:"Cadastrar",btnClass:"btn-dark",type:"button",onClick:Z})])]),_:1},8,["activeModal"])])}}};const Le=k=>(se("data-v-aaf596e9"),k=k(),ne(),k),Qe={class:"grid grid-cols-12 gap-4 p-4"},Ze={class:"col-span-12 md:col-span-6"},We={class:"text-base text-slate-600 dark:text-slate-300"},He={class:"col-span-12 md:col-span-6"},Je={class:"text-base text-slate-600 dark:text-slate-300"},Ke={class:"col-span-12 md:col-span-6"},Xe={class:"text-base text-slate-600 dark:text-slate-300"},Ye={class:"col-span-12 md:col-span-6"},eo={class:"text-base text-slate-600 dark:text-slate-300"},oo={class:"col-span-12 md:col-span-6"},to={class:"text-base text-slate-600 dark:text-slate-300"},ao={class:"col-span-12 md:col-span-6"},lo={class:"text-base text-slate-600 dark:text-slate-300"},so={class:"col-span-12 md:col-span-6"},no={class:"text-base text-slate-600 dark:text-slate-300"},io=Le(()=>e("label",{class:"block mb-2"},"Gênero",-1)),ro={class:"flex gap-5"},co={class:"col-span-12 md:col-span-6"},uo={class:"text-base text-slate-600 dark:text-slate-300"},mo={class:"col-span-12 md:col-span-6"},po={class:"text-base text-slate-600 dark:text-slate-300"},vo={class:"flex gap-5 mx-2 px-2"},_o={__name:"EditModal",props:{modalEditStatus:{type:Boolean,default:!1},initialData:{type:Object,default:()=>({})}},emits:["closeModelEdit","update"],setup(k,{emit:F}){const C=k,M={phoneValidate:{phone:!0,phoneRegionCode:"MZ"}},n=a({name:"",email:"",phone1:"",phone2:"",address:"",birth:"",gender:"",role:"",emergency_contact_name:"",emergency_contact:"",id:""});oe(()=>C.initialData,d=>{var l,s,_,p,y,V,h;d&&(n.value={id:d.id,name:d.name||"",email:d.email||"",phone1:((l=d.employee)==null?void 0:l.phone1)||"",phone2:((s=d.employee)==null?void 0:s.phone2)||"",address:((_=d.employee)==null?void 0:_.address)||"",birth:((p=d.employee)==null?void 0:p.birth)||"",gender:((y=d.employee)==null?void 0:y.gender)||"",role:d.role||"",emergency_contact_name:((V=d.employee)==null?void 0:V.emergency_contact_name)||"",emergency_contact:((h=d.employee)==null?void 0:h.emergency_contact)||""})},{immediate:!0});const f=()=>{F("closeModelEdit")},x=()=>{F("update",n.value)};return(d,l)=>(g(),S("div",null,[t(o(Y),{title:"Editar Motorista",label:"Editar Motorista",activeModal:k.modalEditStatus,onClose:f,sizeClass:"max-w-5xl"},{default:m(()=>[e("div",Qe,[e("div",Ze,[e("div",We,[t(o(E),{label:"Nome completo",type:"text",placeholder:"Nome completo",modelValue:n.value.name,"onUpdate:modelValue":l[0]||(l[0]=s=>n.value.name=s)},null,8,["modelValue"])])]),e("div",He,[e("div",Je,[t(o(E),{label:"E-mail",type:"email",placeholder:"E-mail",modelValue:n.value.email,"onUpdate:modelValue":l[1]||(l[1]=s=>n.value.email=s)},null,8,["modelValue"])])]),e("div",Ke,[e("div",Xe,[t(o(R),{label:"Telefone 1",prepend:"(+258)",placeholder:"Telefone 1",modelValue:n.value.phone1,"onUpdate:modelValue":l[2]||(l[2]=s=>n.value.phone1=s),isMask:"",options:M.phoneValidate},null,8,["modelValue","options"])])]),e("div",Ye,[e("div",eo,[t(o(R),{label:"Telefone 2",prepend:"(+258)",placeholder:"Telefone 2",modelValue:n.value.phone2,"onUpdate:modelValue":l[3]||(l[3]=s=>n.value.phone2=s),isMask:"",options:M.phoneValidate},null,8,["modelValue","options"])])]),e("div",oo,[e("div",to,[t(o(E),{label:"Endereço",type:"text",placeholder:"Endereço",modelValue:n.value.address,"onUpdate:modelValue":l[4]||(l[4]=s=>n.value.address=s)},null,8,["modelValue"])])]),e("div",ao,[e("div",lo,[t(o(te),{label:"Data de Nascimento",name:"birth_date"},{default:m(()=>[t(o(le),{modelValue:n.value.birth,"onUpdate:modelValue":l[5]||(l[5]=s=>n.value.birth=s),class:"form-control",id:"birth_date",placeholder:"yyyy, dd M"},null,8,["modelValue"])]),_:1})])]),e("div",so,[e("div",no,[io,e("div",ro,[t(o(Q),{label:"Masculino",name:"gender",value:"Male",modelValue:n.value.gender,"onUpdate:modelValue":l[6]||(l[6]=s=>n.value.gender=s)},null,8,["modelValue"]),t(o(Q),{label:"Feminino",name:"gender",value:"Female",modelValue:n.value.gender,"onUpdate:modelValue":l[7]||(l[7]=s=>n.value.gender=s)},null,8,["modelValue"])])])]),e("div",co,[e("div",uo,[t(o(E),{label:"Nome do Contato de Emergência",type:"text",placeholder:"Nome do Contato de Emergência",modelValue:n.value.emergency_contact_name,"onUpdate:modelValue":l[8]||(l[8]=s=>n.value.emergency_contact_name=s)},null,8,["modelValue"])])]),e("div",mo,[e("div",po,[t(o(R),{label:"Telefone do Contato de Emergência",prepend:"(+258)",placeholder:"Telefone do Contato de Emergência",modelValue:n.value.emergency_contact,"onUpdate:modelValue":l[9]||(l[9]=s=>n.value.emergency_contact=s),isMask:"",options:M.phoneValidate},null,8,["modelValue","options"])])])]),e("div",vo,[t(o(P),{type:"button",text:"Cancelar",btnClass:"btn-outline-dark",onClick:f}),t(o(P),{text:"Salvar",btnClass:"btn-dark",type:"button",onClick:x})])]),_:1},8,["activeModal"])]))}},ho=ae(_o,[["__scopeId","data-v-aaf596e9"]]),bo={key:0},go={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},fo=e("h5",null,"Funcionarios",-1),xo={key:0},yo={style:{"text-transform":"lowercase"}},Vo={key:1},ko={style:{"text-transform":"lowercase"}},Co={key:2,class:"flex justify-center"},Eo={class:"flex space-x-3 rtl:space-x-reverse"},Mo=["onClick"],$o=e("span",null," Edit",-1),No=["onClick"],wo=e("span",null," Edit",-1),Uo=["onClick"],To=e("span",null,"Delete",-1),So={class:"py-4 px-3"},Lo={__name:"indexPage",setup(k){const F=ve(),{createUser:C,deleteEmployee:M,updateEmployee:n}=F,f=a(0),x=a([]);a([]);const d=de(),l=a(null),s=a(!1),_=a([]),p=a(!1);ie();const y=localStorage.getItem("sigt_user_role"),V=async()=>{try{const c=await pe.get("employee/driver");x.value=c.data,f.value=c.data.length}catch(c){console.error("Failed to fetch courses:",c)}};re(()=>{V()});const h=a(1),$=a(10),B=a(5),N=a("");a([{name:"view",icon:"heroicons-outline:eye"},{name:"edit",icon:"heroicons:pencil-square"},{name:"delete",icon:"heroicons-outline:trash"}]);const D=a([{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}]),j=a([{label:"Id",field:"id"},{label:"Nome do usuario",field:"name"},{label:"E-mail",field:"email"},{label:"Action",field:"action"}]),I=async c=>{var b,A;p.value=!0;try{const U=await C(c);d.success("funcionario criada com sucesso",{timeout:2e3}),V()}catch(U){if(U.response.data.message,!(U.response&&U.response.status===401)){const u=((A=(b=U.response)==null?void 0:b.data)==null?void 0:A.message)||"Ocorreu um erro desconhecido";d.error(u,{timeout:2e3})}}finally{p.value=!1}},z=c=>{l.value=c,s.value=!0},w=()=>{s.value=!1,l.value=null},G=async()=>{p.value=!0;try{(await M(l.value)).success?(d.success("usuario removido com sucesso",{timeout:2e3}),V()):d.error("Nao foi possivel remover a usuario ",{timeout:2e3})}catch(c){d.error("Nao foi possivel remover a usuario | "+c,{timeout:2e3})}finally{p.value=!1,w()}},O=a(!1),Z=c=>{O.value=!0,_.value=c,console.log(_)},v=()=>{O.value=!1},r=async c=>{p.value=!0,v(),console.log("Dados atualizados:",c);try{(await n(c)).success?(d.success("funcionario editada com sucesso",{timeout:2e3}),V()):d.error("Nao foi possivel editar a funcionario ",{timeout:2e3})}catch(b){d.error("Nao foi possivel editar a funcionario | "+b,{timeout:2e3})}finally{p.value=!1}},W=ce(),i=a(!1);return oe(()=>W.name,c=>{c==="employees.details.index"?i.value=!0:i.value=!1}),(c,b)=>{const A=X("router-view"),U=X("vue-good-table");return g(),S("div",null,[p.value?(g(),S("div",bo,[t(o(he))])):T("",!0),t(A),ue(e("div",null,[t(o(_e),{noborder:""},{default:m(()=>[e("div",null,[t(o(Ae),{onCreateEmployeeModal:I,class:"py-5"}),e("div",go,[fo,t(o(R),{modelValue:N.value,"onUpdate:modelValue":b[0]||(b[0]=u=>N.value=u),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"])])]),t(U,{columns:j.value,styleClass:" vgt-table bordered centered lowercase",rows:x.value,"pagination-options":{enabled:!0,perPage:$.value},"search-options":{enabled:!0,externalQuery:N.value},"select-options":{enabled:!0,selectOnCheckboxOnly:!0,selectioninfoClass:"custom-class",selectionText:"rows selected",clearSelectionText:"clear",disableSelectinfo:!0,selectAllByGroup:!0}},{"table-row":m(u=>[u.column.field=="username"?(g(),S("span",xo,[e("span",yo,q(u.row.username),1)])):T("",!0),u.column.field=="email"?(g(),S("span",Vo,[e("span",ko,q(u.row.email),1)])):T("",!0),u.column.field=="action"?(g(),S("span",Co,[e("div",Eo,[o(y)=="secretary"&&u.row.role!=="admin"?(g(),H(o(K),{key:0,placement:"top",arrow:"",theme:"danger-500"},{button:m(()=>[e("div",{class:"action-btn",onClick:L=>c.toggleEditDelete(u.row)},[t(o(J),{icon:"heroicons:pencil-square"})],8,Mo)]),default:m(()=>[$o]),_:2},1024)):T("",!0),o(y)=="admin"?(g(),H(o(K),{key:1,placement:"top",arrow:"",theme:"danger-500"},{button:m(()=>[e("div",{class:"action-btn",onClick:L=>Z(u.row)},[t(o(J),{icon:"heroicons:pencil-square"})],8,No)]),default:m(()=>[wo]),_:2},1024)):T("",!0),o(y)==="admin"?(g(),H(o(K),{key:2,placement:"top",arrow:"",theme:"danger-500"},{button:m(()=>[e("div",{class:"action-btn",onClick:L=>z(u.row)},[t(o(J),{icon:"heroicons:trash"})],8,Uo)]),default:m(()=>[To]),_:2},1024)):T("",!0)])])):T("",!0)]),"pagination-bottom":m(u=>[e("div",So,[t(o(be),{total:f.value,current:h.value,"per-page":$.value,pageRange:B.value,onPageChanged:b[1]||(b[1]=L=>h.value=L),pageChanged:u.pageChanged,perPageChanged:u.perPageChanged,enableSearch:"",enableSelect:"",options:D.value},{default:m(()=>[ee(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])]),_:1}),t(o(Y),{title:"Basic Modal",label:"Modal title",activeModal:s.value,onClose:w},{footer:m(()=>[t(o(P),{text:"Cancelar",btnClass:"btn-outline-dark",onClick:w}),t(o(P),{text:"Confirmar",btnClass:"btn-dark ",onClick:G})]),default:m(()=>[ee(" Lorem ipsum dolor sit amet, consec tetur adipiscing elit, sed do eiusmod tempor incididun ut . ")]),_:1},8,["activeModal"]),t(o(ho),{modalEditStatus:O.value,onCloseModelEdit:v,initialData:_.value,onUpdate:r},null,8,["modalEditStatus","initialData"])],512),[[me,!i.value]])])}}};export{Lo as default};
